<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Panel Unificado de Gestión - Clínica Universitaria</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#008000",
                        "clinical-blue": "#008000",
                        "background-light": "#f8fafc",
                        "background-dark": "#0f172a",
                        "success-green": "#10b981",
                        "danger-red": "#ef4444",
                        "whatsapp": "#25D366"
                    },
                    fontFamily: { "display": ["Inter"] },
                    borderRadius: { "DEFAULT": "0.375rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        body { font-family: 'Inter', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .appointment-card.active { @apply border-clinical-blue bg-clinical-blue/5 ring-1 ring-clinical-blue; }
        .calendar-grid { display: grid; grid-template-columns: 80px repeat(7, 1fr); }
        .calendar-cell { @apply border-b border-r border-slate-200 dark:border-slate-800 min-h-[80px] p-1 transition-colors relative; }
        .calendar-cell.available:hover { @apply bg-slate-100/50 dark:bg-slate-800/30 cursor-pointer; }
        .time-label { @apply sticky left-0 bg-white dark:bg-slate-900 z-10 text-[10px] font-bold text-slate-400 text-right pr-3 pt-2; }
        .day-header { @apply sticky top-0 bg-white dark:bg-slate-900 z-20 border-b border-slate-200 dark:border-slate-800 py-3 text-center; }
        .booking-slot { @apply rounded-md p-1 mb-1 text-[9px] font-semibold leading-tight flex flex-col gap-0.5; }
        .booking-occupied { @apply bg-danger-red/10 border-l-2 border-danger-red text-danger-red; }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display">
    <div class="relative flex h-screen w-full flex-col overflow-hidden">
        <header
            class="flex shrink-0 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 py-3 z-50">
            <div class="flex items-center gap-8">
                <div class="flex items-center gap-3 text-clinical-blue">
                    <div class="size-8 flex items-center justify-center bg-clinical-blue/10 rounded-lg">
                        <span class="material-symbols-outlined text-clinical-blue text-2xl">medical_services</span>
                    </div>
                    <h2 class="text-slate-900 dark:text-slate-100 text-lg font-bold">Clínica Universitaria</h2>
                </div>
                <h1 class="hidden md:block text-sm font-semibold text-slate-500 uppercase tracking-wider">Panel de
                    Gestión</h1>
            </div>
            <div class="flex items-center gap-4">
                <div class="text-right hidden sm:block">
                    <p class="text-xs font-bold">Ricardo Pérez</p>
                    <p class="text-[10px] text-slate-500 uppercase">Practicante</p>
                </div>
                <div class="h-10 w-10 rounded-full border-2 border-clinical-blue/20 bg-slate-200 overflow-hidden">
                    <img alt="Perfil"
                        src="https://ui-avatars.com/api/?name=Ricardo+Perez&background=135bec&color=fff" />
                </div>
            </div>
        </header>

        <div class="flex flex-1 overflow-hidden">
            <main class="flex flex-1 w-full overflow-hidden">
                <section
                    class="w-1/3 max-w-[350px] border-r border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex flex-col">
                    <div class="p-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between">
                        <h3 class="text-xl font-bold">Citas Asignadas</h3>
                        <span
                            class="bg-clinical-blue/10 text-clinical-blue text-xs font-bold px-2 py-1 rounded-full">2</span>
                    </div>
                    <div class="flex-1 overflow-y-auto p-4 space-y-4">
                        <div
                            class="appointment-card active bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm">
                            <div class="flex items-center gap-3 mb-3">
                                <div
                                    class="size-10 rounded-full bg-blue-100 flex items-center justify-center text-blue font-bold">
                                    MA</div>
                                <div>
                                    <h4 class="font-bold text-sm">María Arrieta</h4>
                                    <p class="text-[10px] text-slate-500">Céd: 1-1939-0826</p>
                                </div>
                            </div>
                            <button
                                onclick="openContactModal('María Arrieta', '1-1939-0826', 'MA', 'bg-blue-100', 'text-clinical-blue')"
                                class="w-full py-2 bg-clinical-blue text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors">
                                <span class="material-symbols-outlined text-sm">contact_phone</span> Gestionar Contacto
                            </button>
                        </div>
                        <div
                            class="appointment-card bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm">
                            <div class="flex items-center gap-3 mb-3">
                                <div
                                    class="size-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold">
                                    FM</div>
                                <div>
                                    <h4 class="font-bold text-sm">Fiorella Monge</h4>
                                    <p class="text-[10px] text-slate-500">Céd: 1-1939-0826</p>
                                </div>
                            </div>
                            <button
                                onclick="openContactModal('Fiorella Monge', '1-1939-0826', 'FM', 'bg-purple-100', 'text-purple-600')"
                                class="w-full py-2 bg-clinical-blue text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors">
                                <span class="material-symbols-outlined text-sm">contact_phone</span> Gestionar Contacto
                            </button>
                        </div>
                    </div>
                </section>

                <section class="flex-1 flex flex-col bg-white dark:bg-slate-900 overflow-hidden">
                    <div
                        class="p-6 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900 z-30">
                        <div>
                            <h2 class="text-2xl font-black">Horario de Consultorios</h2>
                            <p class="text-slate-500 text-sm">Semana del 20 al 26 de Mayo</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="flex gap-2 items-center text-[10px] font-bold uppercase">
                                <span class="flex items-center gap-1"><span
                                        class="size-2 rounded-full bg-danger-red/30 border border-danger-red"></span>
                                    Ocupado</span>
                                <span class="flex items-center gap-1"><span
                                        class="size-2 rounded-full bg-slate-100 border border-slate-300"></span>
                                    Libre</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-auto">
                        <div class="calendar-grid min-w-[1000px]">
                            <div class="day-header"></div>
                            <script>
                                const dias = ['Lunes 20', 'Martes 21', 'Miércoles 22', 'Jueves 23', 'Viernes 24', 'Sábado 25', 'Domingo 26'];
                                dias.forEach((dia, i) => {
                                    const esHoy = dia.includes('Jueves');
                                    document.write(`
                                        <div class="day-header ${esHoy ? 'bg-clinical-blue/5' : ''}">
                                            <span class="block text-[10px] font-black ${esHoy ? 'text-clinical-blue' : 'text-slate-400'} uppercase">${dia.split(' ')[0]}</span>
                                            <span class="text-xl font-black ${esHoy ? 'text-clinical-blue' : ''}">${dia.split(' ')[1]}</span>
                                        </div>
                                    `);
                                });

                                const horas = ['08:00 AM', '09:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '01:00 PM', '02:00 PM', '03:00 PM', '04:00 PM', '05:00 PM'];

                                // Definimos algunas reservas fijas para que se vea lleno
                                const ocupados = [
                                    "08:00 AM-1", "09:00 AM-0", "10:00 AM-2", "11:00 AM-4",
                                    "02:00 PM-1", "02:00 PM-3", "04:00 PM-0", "04:00 PM-2"
                                ];

                                horas.forEach(hora => {
                                    document.write(`<div class="time-label">${hora}</div>`);
                                    for (let i = 0; i < 7; i++) {
                                        let idCelda = `${hora}-${i}`;
                                        let esAlmuerzo = (hora === '01:00 PM');
                                        let esDomingo = (i === 6);

                                        if (esAlmuerzo) {
                                            document.write(`<div class="calendar-cell bg-slate-50 dark:bg-slate-950/20 flex items-center justify-center italic text-[9px] text-slate-400">Receso</div>`);
                                        } else if (esDomingo) {
                                            document.write(`<div class="calendar-cell bg-slate-50 dark:bg-slate-950/40"></div>`);
                                        } else if (ocupados.includes(idCelda)) {
                                            document.write(`
                                                <div class="calendar-cell">
                                                    <div class="booking-slot booking-occupied">
                                                        <span>Cons. ${Math.floor(Math.random() * 3) + 1}</span>
                                                        <span class="opacity-60">Reservado</span>
                                                    </div>
                                                </div>`);
                                        } else {
                                            document.write(`<div class="calendar-cell available" onclick="openBookingModal('${dias[i]}', '${hora}')"></div>`);
                                        }
                                    }
                                });
                            </script>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <div id="contactModal"
        class="fixed inset-0 z-[100] hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm">
        <div
            class="relative w-full max-w-sm rounded-2xl bg-white dark:bg-slate-900 p-6 shadow-2xl border border-slate-200 dark:border-slate-800 mx-4">
            <button onclick="closeModal('contactModal')"
                class="absolute right-4 top-4 text-slate-400 hover:text-slate-600 transition-colors"><span
                    class="material-symbols-outlined">close</span></button>

            <div class="mb-5 flex items-center gap-4">
                <div id="modalInitials"
                    class="size-14 rounded-full flex items-center justify-center font-bold text-xl shadow-inner"></div>
                <div>
                    <h3 id="modalPatientName" class="text-xl font-bold text-slate-900 dark:text-white"></h3>
                    <p class="text-xs text-slate-500 font-medium">Paciente Registrado</p>
                    <p class="text-[10px] text-slate-400 mt-1">Cédula: <span id="modalPatientId"
                            class="font-mono"></span></p>
                </div>
            </div>

            <div class="space-y-3">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Opciones de contacto</p>

                <a href="tel:+50688888888"
                    class="flex items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 hover:border-clinical-blue transition-all group">
                    <div class="flex items-center gap-3">
                        <div
                            class="size-9 rounded-lg bg-clinical-blue/10 flex items-center justify-center text-clinical-blue group-hover:bg-clinical-blue group-hover:text-white transition-colors">
                            <span class="material-symbols-outlined text-lg">call</span>
                        </div>
                        <div>
                            <p class="text-xs font-bold dark:text-white">Llamada telefónica</p>
                            <p class="text-[10px] text-slate-500">+506 8888-8888</p>
                        </div>
                    </div>
                    <span
                        class="material-symbols-outlined text-slate-300 group-hover:text-clinical-blue">chevron_right</span>
                </a>

                <a href="https://wa.me/50688888888" target="_blank"
                    class="flex items-center justify-between p-3 rounded-xl bg-green-50/50 dark:bg-green-900/10 border border-green-100 dark:border-green-900/30 hover:border-whatsapp transition-all group">
                    <div class="flex items-center gap-3">
                        <div
                            class="size-9 rounded-lg bg-whatsapp flex items-center justify-center text-white shadow-sm">
                            <span class="material-symbols-outlined text-lg">chat</span>
                        </div>
                        <div>
                            <p class="text-xs font-bold text-green-700 dark:text-green-400">WhatsApp</p>
                            <p class="text-[10px] text-green-600/70 dark:text-green-500/50">Enviar mensaje directo</p>
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-green-300 group-hover:text-whatsapp">open_in_new</span>
                </a>
            </div>

            <button onclick="closeModal('contactModal')"
                class="w-full mt-6 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded-xl text-sm font-bold hover:bg-slate-200 transition-colors">Cerrar</button>
        </div>
    </div>

    <div id="bookingModal"
        class="fixed inset-0 z-[100] hidden items-center justify-center bg-slate-900/60 backdrop-blur-sm">
        <div
            class="relative w-full max-w-md rounded-2xl bg-white dark:bg-slate-900 p-6 shadow-2xl border border-slate-200 dark:border-slate-800 mx-4">
            <button onclick="closeModal('bookingModal')" class="absolute right-4 top-4 text-slate-400"><span
                    class="material-symbols-outlined">close</span></button>
            <div class="mb-6">
                <h3 class="text-xl font-black text-clinical-blue flex items-center gap-2">
                    <span class="material-symbols-outlined">add_circle</span> Nueva Reserva
                </h3>
            </div>
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700">
                    <p class="text-[10px] font-bold text-slate-400 uppercase">Día seleccionado</p>
                    <p id="bookDate" class="text-sm font-bold"></p>
                </div>
                <div class="p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700">
                    <p class="text-[10px] font-bold text-slate-400 uppercase">Hora de inicio</p>
                    <p id="bookTime" class="text-sm font-bold"></p>
                </div>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-[11px] font-bold text-slate-500 uppercase mb-1 ml-1">Consultorio
                        Disponible</label>
                    <select
                        class="w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl text-sm p-3 focus:ring-2 focus:ring-clinical-blue focus:border-transparent outline-none transition-all">
                        <option>Consultorio #1 </option>
                        <option>Consultorio #2 </option>
                        <option>Consultorio #3 </option>
                        <option>Consultorio #4 </option>
                        <option>Consultorio #5 </option>
                        <option>Consultorio #6 </option>
                    </select>
                </div>
                <div class="pt-4 flex gap-3">
                    <button onclick="closeModal('bookingModal')"
                        class="flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors">Cancelar</button>
                    <button onclick="alert('¡Reserva confirmada!'); closeModal('bookingModal')"
                        class="flex-[2] py-3 bg-clinical-blue text-white rounded-xl text-sm font-bold shadow-lg shadow-clinical-blue/20 hover:bg-blue-700 transition-all">Confirmar
                        Espacio</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openContactModal(name, cedula, initials, bgClass, textClass) {
            document.getElementById('modalPatientName').innerText = name;
            document.getElementById('modalPatientId').innerText = cedula;
            const avatar = document.getElementById('modalInitials');
            avatar.innerText = initials;
            avatar.className = `size-14 rounded-full flex items-center justify-center font-bold text-xl ${bgClass} ${textClass} shadow-sm border-2 border-white`;
            toggleModal('contactModal', true);
        }

        function openBookingModal(date, time) {
            document.getElementById('bookDate').innerText = date;
            document.getElementById('bookTime').innerText = time;
            toggleModal('bookingModal', true);
        }

        function closeModal(id) { toggleModal(id, false); }

        function toggleModal(id, show) {
            const modal = document.getElementById(id);
            if (show) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            } else {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        window.onclick = function (e) {
            if (e.target.classList.contains('fixed')) {
                toggleModal(e.target.id, false);
            }
        }
    </script>
</body>

</html>